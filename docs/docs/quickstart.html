<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Quickstart - Aphrodite</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/tufte.css">
<link rel="stylesheet" href="/main.css">
<link rel="stylesheet" href="/docs/index.css">

<meta name="description" content="If you&#x27;ve found these docs, you&#x27;re a bit early. Aphrodite is still under construction. Official first release of Aphrodite to follow by end of June. GitHub

A TodoMVC example app that uses Aphrodite is here: https://github.com/tantaman/aphrodite/tree/main…">
<meta name="keywords" content="software, schemas, data">
<meta name="author" content="Matt Wonlaw">
<meta name="copyright" content="© 2022 Matt Wonlaw">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Aphrodite">
<meta property="og:title" content="Quickstart">
<meta property="og:description" content="If you&#x27;ve found these docs, you&#x27;re a bit early. Aphrodite is still under construction. Official first release of Aphrodite to follow by end of June. GitHub

A TodoMVC example app that uses Aphrodite is here: https://github.com/tantaman/aphrodite/tree/main…">
<meta property="og:image" content="https://aphrodite.sh/assets/gods/zeus.png">
<meta property="og:image:alt" content="Zeus">
<meta property="og:image:width" content="266">
<meta property="og:image:height" content="200">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://aphrodite.sh/assets/gods/zeus.png">
<meta name="twitter:image:alt" content="Zeus">
<meta name="twitter:site" content="@tantaman">
<meta name="twitter:label1" content="Reading time">
<meta name="twitter:data1" content="3-5 minutes">
</head>
<body><a href="https://github.com/tantaman/aphrodite" class="github-corner" aria-label="View source on GitHub"><svg width="100" height="100" viewBox="0 0 250 250" style="fill:var(--dress); color:var(--black); position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><aside><div class="center"><a class="home-link" href="/"><div class="god-circle center-block"><div class="god-head god-head-aphrodite"></div></div></a><a class="hamburger"></a></div><ol><li class="indent"><a href="/docs/why">Why Aphrodite</a></li><li class="active indent"><a href="/docs/quickstart">Quickstart</a></li><li class="indent"><a href="/docs/schemas">Schemas</a></li><li class="indent"><a href="/docs/models">Models</a></li><li class="indent"><a href="/docs/mutations-and-transactions">Mutating Data</a></li><li class="indent"><a href="/docs/queries">Queries</a></li><li class="indent"><a href="/docs/reactivity">Reactivity</a></li><li class="indent"><a href="/docs/data-sync-p2p">Data Sync &#x26; P2P</a></li><li class="indent"><a href="/docs/permissions">Permissions</a></li><li class="indent"><a href="/docs/migrations">Migrations</a></li></ol></aside><main><article><h1>Quickstart</h1><p class="subtitle">get up and running with Aphrodite</p><section>
<nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#installation">Installation</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#your-first-schema">Your First Schema</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#adding-a-mutation">Adding a Mutation</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#creatingmutating-a-node">Creating/Mutating a Node</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#querying-for-nodes">Querying for Nodes</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#defining-an-edge">Defining an Edge</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#walking-a-graph">Walking a Graph</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#reactive-queries">Reactive Queries</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#react-integration">React Integration</a></li></ol></nav><blockquote>
<p>If you've found these docs, you're a bit early. Aphrodite is still under construction. Official first release of Aphrodite to follow by end of June.</p>
<p><a href="https://github.com/tantaman/aphrodite">GitHub</a></p>
<p>A <strong>TodoMVC</strong> example app that uses Aphrodite is here: <a href="https://github.com/tantaman/aphrodite/tree/main/examples/todo-mvc">https://github.com/tantaman/aphrodite/tree/main/examples/todo-mvc</a></p>
<p><a href="https://github.com/tantaman/aphrodite/blob/main/packages/integration-tests-ts/src/__tests__/">Integration tests</a> to show the described use cases are being built out.</p>
</blockquote>
<hr>
<p><code>Aphrodite</code> makes it easy to describe, model and interact with your data. After installing <code>Aphrodite</code>, everything begins with defining a schema. If you'd like to understand <em>why</em> this project exists before diving in, see <a class="internal new" href="/docs/why">Why Aphrodite?</a></p>
<blockquote>
<p>Note: <code>Aphrodite</code> currently targets TypeScript and the browser. To see when support will be added for vanilla <code>JS</code>, <code>Node</code>, <code>iOS</code>, and <code>Android</code> see the <a class="internal new" href="/blog/roadmap">roadmap</a>.</p>
</blockquote>
<h1 id="installation"><a aria-hidden="true" tabindex="-1" href="#installation"><span class="icon icon-link"></span></a>Installation</h1>
<p><code>Aphrodite</code> has two main components:</p>
<ol>
<li>The runtime for the given target</li>
<li>The codegen framework</li>
</ol>
<p>These are shipped as two separated packages as the codegen framework is only needed during development and is not deployed with your application.</p>
<p>Install them using <a href="https://www.npmjs.com/">npm</a> as seen below --</p>
<pre><code class="hljs language-bash">npm install @aphro/runtime-ts
npm install --save-dev @aphro/codegen-cli
</code></pre>
<h1 id="your-first-schema"><a aria-hidden="true" tabindex="-1" href="#your-first-schema"><span class="icon icon-link"></span></a>Your First Schema</h1>
<p>Schemas are the foundation of <code>Aphrodite</code>. They are stored as code and describe your application's data model. From the information provided in the  schema, we go on to generate:</p>
<ol>
<li>The corresponding database schema</li>
<li>Classes to represent your data in the target language</li>
<li>Query builders to traverse your data</li>
<li>Mutators to safely modify your data</li>
</ol>
<p>To get started, create a file in your project's <code>src</code> directory called <code>domain.aphro</code>. This is where we'll place are node and edge definitions.</p>
<p>Open that file and define a <code>TodoList</code> node --</p>
<pre><code class="hljs language-typescript"><span class="hljs-attr">engine</span>: sqlite
<span class="hljs-attr">db</span>: example

<span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Node</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-variable constant_">ID</span>&#x3C;<span class="hljs-title class_">TodoList</span>>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
}
</code></pre>
<p>next run</p>
<pre><code class="hljs language-bash">npx aphro gen src/domain.aphro -d src/generated
</code></pre>
<p>This will generate a few files:</p>
<pre><code class="hljs language-bash">src/generated
|-- TodoList.ts
|-- TodoListQuery.ts
|-- TodoListSpec.ts
</code></pre>
<h1 id="adding-a-mutation"><a aria-hidden="true" tabindex="-1" href="#adding-a-mutation"><span class="icon icon-link"></span></a>Adding a Mutation</h1>
<p>We have classes that allow us to load and query TodoList. What's missing, however, is the ability to create one. This is because we haven't defined any mutations that can act on TodoList.</p>
<p>Open <code>domain.aphro</code> and add the following:</p>
<pre><code class="hljs language-typescript"><span class="hljs-attr">engine</span>: sqlite
<span class="hljs-attr">db</span>: example

<span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Node</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-variable constant_">ID</span>&#x3C;<span class="hljs-title class_">TodoList</span>>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
} &#x26; <span class="hljs-title class_">Mutations</span> {
  create <span class="hljs-keyword">as</span> <span class="hljs-title class_">Create</span> {
    name
  }
}
</code></pre>
<p>then re-run the codegen</p>
<pre><code class="hljs language-bash">npx aphro gen src/domain.aphro -d src/generated
</code></pre>
<p>You'll now see a new file called <code>TodoListMutationsImpl.ts</code>. We'll use this to create some data.</p>
<h1 id="creatingmutating-a-node"><a aria-hidden="true" tabindex="-1" href="#creatingmutating-a-node"><span class="icon icon-link"></span></a>Creating/Mutating a Node</h1>
<p>Opening up <code>TodoListMutationsImpl.ts</code> you'll see this method that has been generated for you:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createImpl</span>(<span class="hljs-params">
  mutator: Omit&#x3C;IMutationBuilder&#x3C;TodoList, Data>, <span class="hljs-string">'toChangeset'</span>>,
  {}: CreateArgs,
</span>): <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Changeset</span>&#x3C;<span class="hljs-built_in">any</span>>[] {
  <span class="hljs-comment">// Use the provided mutator to make your desired changes.</span>
  <span class="hljs-comment">// e.g., mutator.set({name: "Foo" });</span>
  <span class="hljs-comment">// You do not need to return anything from this method. The mutator will track your changes.</span>
  <span class="hljs-comment">// If you do return changesets, those changesets will be applied in addition to the changes made to the mutator.</span>
}
</code></pre>
<p>Here you can fill in any logic that should take place upon creation. <code>TodoList</code> is pretty simple -- we'll only be setting the name on create. Inside the <code>create</code> method we can access the raw <code>mutator</code> which lets us change any property on the model.</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createImpl</span>(<span class="hljs-params">
  mutator: Omit&#x3C;IMutationBuilder&#x3C;TodoList, Data>, <span class="hljs-string">'toChangeset'</span>>,
  {}: CreateArgs,
</span>): <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Changeset</span>&#x3C;<span class="hljs-built_in">any</span>>[] {
  mutator.<span class="hljs-title function_">set</span>({
    name
  });
}
</code></pre>
<p>Now that the create mutation has been implemented, lets go ahead and use by importing <code>TodoListMutations</code> (sans impl). Create a <code>main.js</code> file in <code>src</code> and add the following contents:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoListMutations</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./generated/TodoListMutations.js'</span>;

<span class="hljs-keyword">const</span> [persistHandle, todoList] = <span class="hljs-title class_">TodoListMutations</span>.<span class="hljs-title function_">create</span>(ctx, {<span class="hljs-attr">name</span>: <span class="hljs-string">'My first list!'</span>}).<span class="hljs-title function_">save</span>();
</code></pre>
<p>Save returns two things:</p>
<ol>
<li>A promise to the pending database write</li>
<li>An optimistic update, representing the created model</li>
</ol>
<p>The optimsitc update is useful for highly interactive environments where you want to do something with the changes before the write actually succeeds.</p>
<blockquote>
<p>TODO: go over context creation and/or provide default contexts.</p>
</blockquote>
<h1 id="querying-for-nodes"><a aria-hidden="true" tabindex="-1" href="#querying-for-nodes"><span class="icon icon-link"></span></a>Querying for Nodes</h1>
<h1 id="defining-an-edge"><a aria-hidden="true" tabindex="-1" href="#defining-an-edge"><span class="icon icon-link"></span></a>Defining an Edge</h1>
<h1 id="walking-a-graph"><a aria-hidden="true" tabindex="-1" href="#walking-a-graph"><span class="icon icon-link"></span></a>Walking a Graph</h1>
<h1 id="reactive-queries"><a aria-hidden="true" tabindex="-1" href="#reactive-queries"><span class="icon icon-link"></span></a>Reactive Queries</h1>
<h1 id="react-integration"><a aria-hidden="true" tabindex="-1" href="#react-integration"><span class="icon icon-link"></span></a>React Integration</h1>
<p>-- vue, solid, svelt</p>
<script src="https://www.googletagmanager.com/gtag/js?id=G-QT6QH0ZJQ4" async></script>
<script src="/ga.js"></script>
<script src="/assets/god-switcher.js"></script>
</section></article></main></body>
</html>
